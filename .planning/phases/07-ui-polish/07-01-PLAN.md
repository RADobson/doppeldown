---
phase: 07-ui-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/empty-state.tsx
  - src/components/ui/skeleton.tsx
  - src/components/ui/error-message.tsx
  - src/components/ui/button.tsx
  - src/components/ui/input.tsx
autonomous: true

must_haves:
  truths:
    - "EmptyState component renders icon + title + description + optional action"
    - "Skeleton components render animated placeholders matching content structure"
    - "Button and Input use focus-visible instead of focus for keyboard accessibility"
    - "ErrorMessage shows clear, actionable error with optional retry action"
  artifacts:
    - path: "src/components/ui/empty-state.tsx"
      provides: "Reusable empty state component"
      exports: ["EmptyState"]
    - path: "src/components/ui/skeleton.tsx"
      provides: "Skeleton loader components"
      exports: ["Skeleton", "CardSkeleton", "ListSkeleton", "StatSkeleton"]
    - path: "src/components/ui/error-message.tsx"
      provides: "Error message component"
      exports: ["ErrorMessage"]
  key_links:
    - from: "src/components/ui/button.tsx"
      to: "Tailwind focus-visible"
      via: "class replacement"
      pattern: "focus-visible:ring"
---

<objective>
Create foundation UI components for consistent empty states, loading skeletons, error messages, and update existing Button/Input with focus-visible accessibility.

Purpose: Establish reusable patterns that will be applied across dashboard pages in Plan 02.
Output: Four new/updated UI components ready for use.
</objective>

<execution_context>
@/home/dobsondev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dobsondev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-ui-polish/07-RESEARCH.md
@src/components/ui/button.tsx
@src/components/ui/input.tsx
@src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EmptyState and ErrorMessage components</name>
  <files>src/components/ui/empty-state.tsx, src/components/ui/error-message.tsx</files>
  <action>
Create EmptyState component following pattern from RESEARCH.md:
- Props: icon (LucideIcon), title (string), description (string), action (optional: {label, href?, onClick?}), variant ('default' | 'success')
- Renders: centered layout with icon in colored circle, title, description, optional Button/Link
- Default variant uses gray-100 bg + gray-400 icon, success variant uses green-100 bg + green-600 icon
- Use existing cn() utility from @/lib/utils
- Styling: text-center py-12 px-4, icon in 16x16 circle, title text-lg font-semibold, description text-gray-500 max-w-sm mx-auto

Create ErrorMessage component:
- Props: message (string), action (optional: {label, onClick})
- Renders: rounded-lg bg-red-50 border border-red-200 p-4
- AlertCircle icon (red-600), message text-sm text-red-800
- Optional retry button with text-red-600 hover:text-red-700 underline

Import Lucide icons: use LucideIcon type for icon prop, AlertCircle for ErrorMessage.
  </action>
  <verify>
`npx tsc --noEmit` passes with no errors in new files
  </verify>
  <done>
EmptyState renders icon + title + description + optional action button/link
ErrorMessage renders alert with icon + message + optional retry action
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Skeleton loading components</name>
  <files>src/components/ui/skeleton.tsx</files>
  <action>
Create skeleton components using Tailwind animate-pulse (NOT external library):

1. Base Skeleton component:
   - Props: className (optional)
   - Renders: div with animate-pulse bg-gray-200 rounded
   - Example: &lt;Skeleton className="h-4 w-24" /&gt;

2. CardSkeleton:
   - Mimics Card component structure
   - Header area (h-6 w-1/4) + content area (multiple h-4 lines)
   - Use space-y-4 for internal spacing

3. ListSkeleton:
   - Props: rows (default 5)
   - Each row: flex items-center gap-4, icon placeholder (h-4 w-4), text (h-4 flex-1), status (h-4 w-20)
   - divide-y divide-gray-100 between rows

4. StatSkeleton:
   - Mimics stat card layout (icon area + text)
   - Icon circle (h-12 w-12 rounded-lg), label (h-4 w-20), value (h-8 w-16)

All skeletons use bg-gray-200 rounded with animate-pulse.
Export all four: Skeleton, CardSkeleton, ListSkeleton, StatSkeleton.
  </action>
  <verify>
`npx tsc --noEmit` passes
Skeleton components render without errors when imported
  </verify>
  <done>
Four skeleton components available for use in loading states
  </done>
</task>

<task type="auto">
  <name>Task 3: Update Button and Input with focus-visible accessibility</name>
  <files>src/components/ui/button.tsx, src/components/ui/input.tsx</files>
  <action>
Update Button component:
- Replace `focus:ring-2` with `focus-visible:ring-2`
- Replace `focus:ring-offset-2` with `focus-visible:ring-offset-2`
- Replace `focus:outline-none` with `focus:outline-none focus-visible:outline-none`
- Add motion-reduce variant: `motion-reduce:transition-none`
- Keep existing transition-all duration-200

Update Input component:
- Replace `focus:border-primary-500` with `focus-visible:border-primary-500`
- Replace `focus:ring-1` with `focus-visible:ring-1`
- Add `transition-colors duration-200` for smooth state changes
- Add motion-reduce variant

Update Textarea component (same file):
- Same focus-visible changes as Input
- Add transition-colors duration-200

Key principle: focus-visible only shows ring on keyboard navigation, not mouse clicks (better UX).
Preserve all existing functionality - only changing focus behavior.
  </action>
  <verify>
`npx tsc --noEmit` passes
Manual test: Tab through a page - buttons and inputs show focus ring
Manual test: Click button with mouse - no focus ring visible
  </verify>
  <done>
Button shows focus ring only on keyboard focus (Tab), not mouse click
Input shows focus border only on keyboard focus
All components have motion-reduce support
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors: `npx tsc --noEmit`
2. New components export correctly: import in a test file
3. Button focus-visible works: Tab to button shows ring, click doesn't
</verification>

<success_criteria>
- EmptyState, ErrorMessage, Skeleton components exist and export correctly
- Button/Input use focus-visible instead of focus
- All components follow existing project conventions (cn utility, Tailwind classes)
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/07-ui-polish/07-01-SUMMARY.md`
</output>
