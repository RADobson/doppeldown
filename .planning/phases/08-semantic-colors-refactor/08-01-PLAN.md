---
phase: 08-semantic-colors-refactor
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - tailwind.config.ts
autonomous: true

must_haves:
  truths:
    - "CSS variables for semantic tokens exist in globals.css :root"
    - "Tailwind config references CSS variables for all semantic colors"
    - "Semantic class names (bg-background, text-foreground, etc.) work in components"
    - "Existing page appearance unchanged after foundation setup"
  artifacts:
    - path: "src/app/globals.css"
      provides: "CSS custom properties for light theme semantic tokens"
      contains: "--background:"
    - path: "tailwind.config.ts"
      provides: "Semantic color references using hsl(var(--*))"
      contains: "hsl(var(--background))"
  key_links:
    - from: "tailwind.config.ts"
      to: "src/app/globals.css"
      via: "CSS variable references"
      pattern: "var\\(--"
---

<objective>
Set up semantic color token foundation with CSS variables and Tailwind configuration.

Purpose: Create the infrastructure layer that enables semantic color usage throughout the codebase. This is the prerequisite for all component migrations in subsequent plans.

Output: globals.css with CSS custom properties, tailwind.config.ts with semantic color definitions referencing those properties.
</objective>

<execution_context>
@/home/dobsondev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dobsondev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-semantic-colors-refactor/08-RESEARCH.md

@src/app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS custom properties for semantic tokens</name>
  <files>src/app/globals.css</files>
  <action>
Add semantic color CSS variables to globals.css following the shadcn/ui pattern from research.

In @layer base, add :root block with these semantic tokens (HSL space-separated format for opacity support):

```css
@layer base {
  :root {
    --background: 0 0% 100%;           /* white - page background */
    --foreground: 222.2 84% 4.9%;      /* near-black - primary text */

    --card: 0 0% 100%;                  /* white - card backgrounds */
    --card-foreground: 222.2 84% 4.9%; /* near-black - card text */

    --muted: 210 40% 96.1%;            /* gray-50 equivalent - subtle backgrounds */
    --muted-foreground: 215.4 16.3% 46.9%; /* gray-500 equivalent - secondary text */

    --accent: 210 40% 96.1%;           /* gray-100 equivalent - hover states */
    --accent-foreground: 222.2 47.4% 11.2%; /* gray-900 equivalent */

    --destructive: 0 84.2% 60.2%;      /* red-500 equivalent */
    --destructive-foreground: 0 0% 98%; /* near-white */

    --border: 214.3 31.8% 91.4%;       /* gray-200 equivalent */
    --input: 214.3 31.8% 91.4%;        /* gray-200 equivalent - form inputs */
    --ring: 222.2 84% 4.9%;            /* focus ring color */

    --primary: 221.2 83.2% 53.3%;      /* primary-600 blue */
    --primary-foreground: 210 40% 98%; /* near-white */

    /* Scrollbar tokens */
    --scrollbar-track: 210 40% 96.1%;
    --scrollbar-thumb: 215 20.2% 77.5%;
    --scrollbar-thumb-hover: 215 20.2% 63.5%;
  }
}
```

IMPORTANT:
- Use HSL space-separated format (e.g., "222.2 84% 4.9%") NOT hsl() wrapper
- This enables Tailwind opacity modifiers like bg-background/50
- Keep existing :root variables (--foreground-rgb, --background-start-rgb, --background-end-rgb) for now - they'll be cleaned up after migration

Update scrollbar styles to use CSS variables:
```css
::-webkit-scrollbar-track {
  background: hsl(var(--scrollbar-track));
}
::-webkit-scrollbar-thumb {
  background: hsl(var(--scrollbar-thumb));
}
::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--scrollbar-thumb-hover));
}
```
  </action>
  <verify>
Run `grep -c "^    --" src/app/globals.css` - should return 15+ (number of CSS variables defined).
Run `grep "hsl(var(--scrollbar" src/app/globals.css` - should return 3 matches.
  </verify>
  <done>
CSS custom properties exist in :root for all semantic tokens.
Scrollbar styles use CSS variables instead of hardcoded hex values.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extend Tailwind config with semantic colors</name>
  <files>tailwind.config.ts</files>
  <action>
Update tailwind.config.ts to reference CSS variables as semantic colors.

Add `darkMode: ['class']` to config (required for future dark mode, no-op for now).

Extend colors in theme.extend.colors:

```typescript
colors: {
  // Semantic tokens (new)
  background: 'hsl(var(--background))',
  foreground: 'hsl(var(--foreground))',
  card: {
    DEFAULT: 'hsl(var(--card))',
    foreground: 'hsl(var(--card-foreground))',
  },
  muted: {
    DEFAULT: 'hsl(var(--muted))',
    foreground: 'hsl(var(--muted-foreground))',
  },
  accent: {
    DEFAULT: 'hsl(var(--accent))',
    foreground: 'hsl(var(--accent-foreground))',
  },
  destructive: {
    DEFAULT: 'hsl(var(--destructive))',
    foreground: 'hsl(var(--destructive-foreground))',
  },
  border: 'hsl(var(--border))',
  input: 'hsl(var(--input))',
  ring: 'hsl(var(--ring))',

  // Keep existing custom colors (primary, danger, warning, success)
  // These will be preserved for specific use cases
  primary: {
    DEFAULT: 'hsl(var(--primary))',
    foreground: 'hsl(var(--primary-foreground))',
    // Keep numeric scale for granular control
    50: '#eff6ff',
    100: '#dbeafe',
    200: '#bfdbfe',
    300: '#93c5fd',
    400: '#60a5fa',
    500: '#3b82f6',
    600: '#2563eb',
    700: '#1d4ed8',
    800: '#1e40af',
    900: '#1e3a8a',
    950: '#172554',
  },
  danger: { ... }, // keep existing
  warning: { ... }, // keep existing
  success: { ... }, // keep existing
}
```

Add borderRadius references:
```typescript
borderRadius: {
  lg: 'var(--radius, 0.5rem)',
  md: 'calc(var(--radius, 0.5rem) - 2px)',
  sm: 'calc(var(--radius, 0.5rem) - 4px)',
},
```
  </action>
  <verify>
Run `grep "hsl(var(--" tailwind.config.ts | wc -l` - should return 10+ matches.
Run `npm run build` (or next build) - should complete without errors.
  </verify>
  <done>
Tailwind config references CSS variables for semantic colors.
Build succeeds with new configuration.
darkMode: ['class'] is set.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify semantic classes work</name>
  <files>src/app/page.tsx</files>
  <action>
Create a temporary test to verify semantic tokens work correctly.

Add a small hidden test div to src/app/page.tsx (inside main element, can be at the bottom):

```tsx
{/* Semantic color test - remove after verification */}
<div className="hidden">
  <div className="bg-background text-foreground" />
  <div className="bg-card text-card-foreground" />
  <div className="bg-muted text-muted-foreground" />
  <div className="border-border" />
</div>
```

Then run the dev server and check browser DevTools:
1. Inspect the test divs
2. Verify computed styles show correct colors (white background, dark text, etc.)

After verification, REMOVE the test div - it was only for validation.

IMPORTANT: Do NOT leave test code in production.
  </action>
  <verify>
Run `npm run dev` and verify no console errors about unknown classes.
Verify the landing page renders identically to before (visual inspection).
Check that the test div (when temporarily visible) shows correct semantic colors.
  </verify>
  <done>
Semantic color classes (bg-background, text-foreground, etc.) resolve to correct colors.
Application runs without errors.
No visual changes to existing pages (foundation only, no migrations yet).
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds without errors
2. `grep "var(--" tailwind.config.ts` returns multiple matches
3. `grep "^    --" src/app/globals.css` returns 15+ CSS variable definitions
4. Dev server runs without console warnings about unknown Tailwind classes
5. Existing pages render identically (no visual regression)
</verification>

<success_criteria>
- CSS variables defined in globals.css :root for all semantic tokens
- Tailwind config extends colors with hsl(var(--*)) references
- darkMode: ['class'] configured
- Scrollbar uses CSS variables instead of hardcoded colors
- Build passes
- No visual changes to any page (foundation only)
</success_criteria>

<output>
After completion, create `.planning/phases/08-semantic-colors-refactor/08-01-SUMMARY.md`
</output>
