---
phase: 08-semantic-colors-refactor
plan: 03
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - src/app/dashboard/layout.tsx
  - src/app/dashboard/page.tsx
  - src/app/dashboard/brands/page.tsx
  - src/app/dashboard/brands/new/page.tsx
  - src/app/dashboard/brands/[id]/page.tsx
  - src/app/dashboard/threats/page.tsx
  - src/app/dashboard/threats/[id]/page.tsx
  - src/app/dashboard/reports/page.tsx
  - src/app/dashboard/reports/new/page.tsx
  - src/app/dashboard/settings/page.tsx
  - src/app/dashboard/loading.tsx
  - src/app/dashboard/brands/loading.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard layout uses semantic colors for backgrounds, text, and borders"
    - "All dashboard pages use semantic color classes"
    - "Loading skeletons use semantic muted colors"
    - "Dashboard appears identical visually after migration"
  artifacts:
    - path: "src/app/dashboard/layout.tsx"
      provides: "Dashboard layout with semantic colors"
      contains: "bg-background"
    - path: "src/app/dashboard/page.tsx"
      provides: "Dashboard home with semantic colors"
      contains: "text-foreground"
  key_links:
    - from: "src/app/dashboard/**/*.tsx"
      to: "tailwind.config.ts"
      via: "Semantic class names"
      pattern: "bg-background|bg-card|text-foreground|border-border"
---

<objective>
Migrate all dashboard pages and layout from hardcoded colors to semantic tokens.

Purpose: Dashboard is the primary user interface. Systematic migration ensures visual consistency and prepares for dark mode.

Output: Dashboard layout and 10+ page files using semantic color classes.
</objective>

<execution_context>
@/home/dobsondev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dobsondev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-semantic-colors-refactor/08-RESEARCH.md

@src/app/dashboard/layout.tsx
@src/app/dashboard/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Dashboard layout</name>
  <files>src/app/dashboard/layout.tsx</files>
  <action>
Replace hardcoded colors in dashboard layout with semantic tokens.

Mapping for layout:
- `bg-gray-50` (main background) -> `bg-background`
- `bg-gray-900/50` (mobile overlay) -> `bg-foreground/50`
- `bg-white` (sidebar, header) -> `bg-card`
- `border-gray-200` (borders) -> `border-border`
- `text-gray-900` (primary text) -> `text-foreground`
- `text-gray-700` (secondary text) -> `text-foreground` or `text-muted-foreground`
- `text-gray-500` (tertiary text) -> `text-muted-foreground`
- `text-gray-400` (icons, subtle) -> `text-muted-foreground`
- `hover:bg-gray-100` -> `hover:bg-accent`
- `hover:text-gray-700` -> `hover:text-foreground`

Keep primary colors (primary-600, primary-700, primary-50) for brand accent - these are intentional.

Specific elements:
- Sidebar: bg-white -> bg-card, border-gray-200 -> border-border
- Header: bg-white -> bg-card, border-gray-200 -> border-border
- Navigation active: keep bg-primary-50 text-primary-700 (brand)
- Navigation inactive: text-gray-700 -> text-muted-foreground, hover:bg-gray-100 -> hover:bg-accent
- Sign out button: text-gray-700 -> text-muted-foreground, hover:bg-gray-100 -> hover:bg-accent
- Icons: text-gray-400 -> text-muted-foreground
  </action>
  <verify>
Run `grep -c "gray-" src/app/dashboard/layout.tsx` - should return 0 or very few matches.
Run `grep -E "bg-card|bg-background|text-foreground|border-border" src/app/dashboard/layout.tsx` - should return 5+ matches.
  </verify>
  <done>
Dashboard layout uses semantic tokens for all generic grays.
Primary brand colors preserved for active states.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Dashboard home and brands pages</name>
  <files>
src/app/dashboard/page.tsx
src/app/dashboard/brands/page.tsx
src/app/dashboard/brands/new/page.tsx
src/app/dashboard/brands/[id]/page.tsx
  </files>
  <action>
Apply consistent semantic color mapping to dashboard home and brands pages.

Standard mapping (apply to all files):
- `bg-white` -> `bg-card`
- `bg-gray-50` -> `bg-muted`
- `bg-gray-100` -> `bg-accent`
- `text-gray-900` -> `text-foreground`
- `text-gray-700` -> `text-foreground`
- `text-gray-600` -> `text-muted-foreground`
- `text-gray-500` -> `text-muted-foreground`
- `text-gray-400` -> `text-muted-foreground`
- `border-gray-200` -> `border-border`
- `border-gray-300` -> `border-border`
- `hover:bg-gray-50` -> `hover:bg-muted`
- `hover:bg-gray-100` -> `hover:bg-accent`
- `divide-gray-200` -> `divide-border`

PRESERVE intentional semantic colors:
- Red/danger colors for critical threats
- Yellow/warning colors for medium threats
- Green/success colors for safe status
- Blue/primary colors for brand accent
- Status-specific colors (threat-critical, threat-high, etc.)

Work through each file systematically, replacing only generic gray usage.
  </action>
  <verify>
Run for each file:
- `grep -c "bg-white" {file}` -> 0
- `grep -c "gray-[0-9]" {file}` -> 0 or minimal (only intentional status colors)
  </verify>
  <done>
Dashboard home and brands pages use semantic tokens.
Status/severity colors preserved for meaning.
  </done>
</task>

<task type="auto">
  <name>Task 3: Migrate threats, reports, settings, and loading pages</name>
  <files>
src/app/dashboard/threats/page.tsx
src/app/dashboard/threats/[id]/page.tsx
src/app/dashboard/reports/page.tsx
src/app/dashboard/reports/new/page.tsx
src/app/dashboard/settings/page.tsx
src/app/dashboard/loading.tsx
src/app/dashboard/brands/loading.tsx
  </files>
  <action>
Apply same semantic color mapping as Task 2 to remaining dashboard pages.

Use identical mapping:
- `bg-white` -> `bg-card`
- `bg-gray-*` -> `bg-muted` or `bg-accent` (based on context)
- `text-gray-*` -> `text-foreground` or `text-muted-foreground`
- `border-gray-*` -> `border-border`
- Hover states -> `hover:bg-accent` or `hover:bg-muted`

**threats/[id]/page.tsx special attention:**
This file has 66+ text-gray references. Many may be for:
- Evidence details
- WHOIS data
- Screenshot metadata
- Threat analysis results

Replace generic text styling but KEEP:
- Red/danger for critical information
- Yellow for warnings
- Green for safe indicators

**settings/page.tsx:**
Forms often have many gray references for labels, inputs, helper text.
Map systematically:
- Labels: text-gray-700 -> text-foreground
- Helper text: text-gray-500 -> text-muted-foreground
- Disabled states: bg-gray-50 -> bg-muted

**loading.tsx files:**
These contain skeleton components. Ensure skeleton backgrounds use bg-muted.
  </action>
  <verify>
Run `grep -rE "bg-white|bg-gray-[0-9][0-9]?" src/app/dashboard/ --include="*.tsx" | wc -l` - should be near 0.
Run `npm run build` - should pass without errors.
  </verify>
  <done>
All dashboard pages migrated to semantic tokens.
Loading states use semantic muted colors.
Settings forms properly themed.
Threat details preserve status colors.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `grep -rE "bg-white" src/app/dashboard/` returns 0 matches
2. `grep -rE "text-gray-[0-9]" src/app/dashboard/` returns minimal matches (only intentional)
3. `npm run build` succeeds
4. Visual inspection: Dashboard looks identical to before
</verification>

<success_criteria>
- Dashboard layout uses bg-card, bg-background, text-foreground
- All dashboard pages use semantic color classes
- Loading skeletons use bg-muted
- Status colors (red, yellow, green) preserved for meaning
- Build passes
- No visual regression in dashboard
</success_criteria>

<output>
After completion, create `.planning/phases/08-semantic-colors-refactor/08-03-SUMMARY.md`
</output>
