# ============================================================================
# DoppelDown Environment Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# Supabase Configuration (Required)
# ----------------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# ----------------------------------------------------------------------------
# Stripe Configuration (Required)
# ----------------------------------------------------------------------------
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_STARTER_PRICE_ID=price_...
STRIPE_PRO_PRICE_ID=price_...
STRIPE_ENTERPRISE_PRICE_ID=price_...

# ----------------------------------------------------------------------------
# App Configuration
# ----------------------------------------------------------------------------
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ----------------------------------------------------------------------------
# Redis / Caching Configuration (Optional but recommended for production)
# ----------------------------------------------------------------------------
# Redis URL for caching (supports redis:// and rediss:// for TLS)
# Get a free Redis instance from Upstash (upstash.com) or Redis Cloud
REDIS_URL=
# Example: REDIS_URL=redis://default:password@host:6379
# Example with TLS: REDIS_URL=rediss://default:password@host:6379

# Cache key prefix (optional, defaults to 'doppeldown:')
CACHE_KEY_PREFIX=doppeldown:

# Default cache TTL in seconds (optional, defaults to 300 = 5 minutes)
CACHE_DEFAULT_TTL=300

# Max in-memory cache entries when Redis is unavailable (optional, defaults to 10000)
CACHE_MAX_MEMORY_ENTRIES=10000

# Enable debug logging for cache operations (optional)
CACHE_DEBUG=false

# ----------------------------------------------------------------------------
# Evidence Storage Configuration
# ----------------------------------------------------------------------------
SUPABASE_EVIDENCE_BUCKET=evidence
SUPABASE_EVIDENCE_PUBLIC=false
EVIDENCE_SCREENSHOTS_ENABLED=true
EVIDENCE_HTML_MAX_BYTES=1048576
EVIDENCE_SIGNED_URL_TTL_SECONDS=3600

# ----------------------------------------------------------------------------
# Logo & Image Search Configuration
# ----------------------------------------------------------------------------
SUPABASE_LOGO_BUCKET=logos
LOGO_MAX_BYTES=5242880
LOGO_SEARCH_PROVIDER=google_vision
LOGO_SEARCH_FALLBACK=serpapi
LOGO_SEARCH_MAX_RESULTS=15

# Google Vision API (for logo search)
GOOGLE_VISION_API_KEY=

# SerpAPI (fallback for logo and web search)
SERPAPI_API_KEY=

# ----------------------------------------------------------------------------
# Search Provider Configuration
# ----------------------------------------------------------------------------
WEB_SEARCH_PROVIDER=serpapi
SOCIAL_SEARCH_PROVIDER=serpapi
WEB_SEARCH_FALLBACK=true
SOCIAL_SEARCH_FALLBACK=true

# ----------------------------------------------------------------------------
# OpenAI Configuration (for AI threat analysis)
# ----------------------------------------------------------------------------
OPENAI_API_KEY=
VISION_PROVIDER=openai
OPENAI_VISION_MODEL=gpt-4o-mini
OPENAI_INTENT_MODEL=gpt-4o-mini
OPENAI_INTENT_ENABLED=true
OPENAI_VISION_ENABLED=true
PHISHING_INTENT_MAX_CHARS=4000

# ----------------------------------------------------------------------------
# Email Configuration (for alerts)
# ----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=alerts@doppeldown.app

# ----------------------------------------------------------------------------
# React Email / Resend Configuration (Transactional Emails)
# ----------------------------------------------------------------------------
# Get your API key from https://resend.com
RESEND_API_KEY=re_...

# From email address (must be verified in Resend)
FROM_EMAIL=DoppelDown <noreply@doppeldown.com>

# Reply-to email address
REPLY_TO_EMAIL=support@doppeldown.com

# ----------------------------------------------------------------------------
# Scan Worker Configuration (Puppeteer)
# ----------------------------------------------------------------------------
PUPPETEER_EXECUTABLE_PATH=

# Scan timeouts and limits
SCAN_NETWORK_TIMEOUT_MS=4000
SCAN_MAX_QUERIES=5
SCAN_ADDED_LETTER_LIMIT=25
SCAN_SEED_PLURAL_LIMIT=12
SCAN_PRIORITY_TLDS=com,net,org

# Progress update interval in ms
SCAN_PROGRESS_INTERVAL_MS=1500

# How often to check for cancellation (every N domains)
SCAN_CANCEL_CHECK_EVERY=25

# ----------------------------------------------------------------------------
# Optional: Feature Flags
# ----------------------------------------------------------------------------
# Disable AI analysis for testing
# OPENAI_INTENT_ENABLED=false
# OPENAI_VISION_ENABLED=false
